/* src: catalog/view/theme/journal3/lib/hoverintent/jquery.hoverIntent.min.js */
/*!
 * hoverIntent v1.10.1 // 2019.10.05 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2019 Brian Cherne
 */
!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("jquery")):jQuery&&!jQuery.fn.hoverIntent&&factory(jQuery)}(function($){"use strict";function track(ev){cX=ev.pageX,cY=ev.pageY}var cX,cY,_cfg={interval:100,sensitivity:6,timeout:0},INSTANCE_COUNT=0,compare=function(ev,$el,s,cfg){if(Math.sqrt((s.pX-cX)*(s.pX-cX)+(s.pY-cY)*(s.pY-cY))<cfg.sensitivity)return $el.off(s.event,track),delete s.timeoutId,s.isActive=!0,ev.pageX=cX,ev.pageY=cY,delete s.pX,delete s.pY,cfg.over.apply($el[0],[ev]);s.pX=cX,s.pY=cY,s.timeoutId=setTimeout(function(){compare(ev,$el,s,cfg)},cfg.interval)};$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var instanceId=INSTANCE_COUNT++,cfg=$.extend({},_cfg);$.isPlainObject(handlerIn)?(cfg=$.extend(cfg,handlerIn),$.isFunction(cfg.out)||(cfg.out=cfg.over)):cfg=$.isFunction(handlerOut)?$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector}):$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});function handleHover(e){var ev=$.extend({},e),$el=$(this),hoverIntentData=$el.data("hoverIntent");hoverIntentData||$el.data("hoverIntent",hoverIntentData={});var state=hoverIntentData[instanceId];state||(hoverIntentData[instanceId]=state={id:instanceId}),state.timeoutId&&(state.timeoutId=clearTimeout(state.timeoutId));var mousemove=state.event="mousemove.hoverIntent.hoverIntent"+instanceId;if("mouseenter"===e.type){if(state.isActive)return;state.pX=ev.pageX,state.pY=ev.pageY,$el.off(mousemove,track).on(mousemove,track),state.timeoutId=setTimeout(function(){compare(ev,$el,state,cfg)},cfg.interval)}else{if(!state.isActive)return;$el.off(mousemove,track),state.timeoutId=setTimeout(function(){!function(ev,$el,s,out){var data=$el.data("hoverIntent");data&&delete data[s.id],out.apply($el[0],[ev])}(ev,$el,state,cfg.out)},cfg.timeout)}}return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector)}});
/* src: catalog/view/theme/journal3/js/common.js */
if(Journal.ocv==4){$(document).ready(function(){$.fn.jbutton=function(state){return this.each(function(){var element=this;if(state=='loading'){this.html=$(element).html();this.state=$(element).prop('disabled');$(element).prop('disabled',true).addClass('disabled')}
if(state=='reset'){$(element).prop('disabled',false).removeClass('disabled')}});}
$.fn.button=$.fn.jbutton;});}else{$.fn.jbutton=$.fn.button;}
window['cart']=window['cart']||{};window['cart'].add=function(product_id,quantity,quick_buy){quantity=quantity||1;$.ajax({url:Journal['add_cart_url'],type:'post',data:'product_id='+product_id+'&quantity='+quantity,dataType:'json',beforeSend:function(){$('[data-toggle="tooltip"]').tooltip('hide');$('[onclick*="cart.add(\''+product_id+'\'"]').jbutton('loading');},complete:function(){$('[onclick*="cart.add(\''+product_id+'\'"]').jbutton('reset');},success:function(json){$('.alert, .text-danger').remove();if(json['redirect']){if(json['options_popup']){var html='';html+='<div class="popup-wrapper popup-options popup-iframe">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='		<div class="popup-inner-body">';html+='			<button class="btn popup-close"></button>';html+='			<iframe src="index.php?route=journal3/product&product_id='+product_id+'&popup=options&product_quantity='+quantity+(quick_buy?'&quick_buy=true':'')+(Journal['ocv']==4?'&language='+Journal['language']:'')+'" width="100%" height="100%" frameborder="0" onload="update_popup_height(this)"></iframe>';html+='		</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);}else{location=json['redirect'];}}
if(json['success']){if(json['options_popup']){var html='';html+='<div class="popup-wrapper popup-options">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='		<div class="popup-inner-body">';html+='			<button class="btn popup-close"></button>';html+='			<iframe src="index.php?route=journal3/product&product_id='+product_id+'&popup=options'+(quick_buy?'&quick_buy=true':'')+(Journal['ocv']==4?'&language='+Journal['language']:'')+'" width="100%" height="100%" frameborder="0" onload="update_popup_height(this)"></iframe>';html+='		</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);}else{if(json['notification']){show_notification(json['notification']);if(quick_buy){location=Journal['checkoutUrl'];}}else{$('header').after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json['success']+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');}}
setTimeout(function(){$('#cart-total').html(json['total']);$('#cart-items,.cart-badge').html(json['items_count']);if(json['items_count']){$('#cart-items,.cart-badge').removeClass('count-zero');$('#cart').addClass('cart-has-items');}else{$('#cart-items,.cart-badge').addClass('count-zero');$('#cart').removeClass('cart-has-items');}},100);if(Journal['scrollToTop']){$('html, body').animate({scrollTop:0},'slow');}
$('.cart-content ul').load(Journal['info_cart_url']);if(parent.window['_QuickCheckout']){parent.window['_QuickCheckout'].save();}else if($('html').hasClass('route-checkout-cart')||$('html').hasClass('route-checkout-checkout')){parent.location.reload();}}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['cart'].remove=function(key){$.ajax({url:Journal['remove_cart_url'],type:Journal['remove_cart_method'],data:'key='+key,dataType:'json',beforeSend:function(){$('#cart > button').jbutton('loading');},complete:function(){$('#cart > button').jbutton('reset');},success:function(json){setTimeout(function(){$('#cart-total').html(json['total']);$('#cart-items,.cart-badge').html(json['items_count']);if(json['items_count']){$('#cart-items,.cart-badge').removeClass('count-zero');$('#cart').addClass('cart-has-items');}else{$('#cart-items,.cart-badge').addClass('count-zero');$('#cart').removeClass('cart-has-items');}},100);if($('html').hasClass('route-checkout-cart')||$('html').hasClass('route-checkout-checkout')){location.reload();}else{$('.cart-content ul').load(Journal['info_cart_url']);}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['cart'].update=function(key,quantity){$.ajax({url:Journal['edit_cart_url'],type:'post',data:'key='+key+'&quantity='+(typeof(quantity)!='undefined'?quantity:1),dataType:'json',beforeSend:function(){$('#cart > button').jbutton('loading');},complete:function(){$('#cart > button').jbutton('reset');},success:function(json){setTimeout(function(){$('#cart-total').html(json['total']);$('#cart-items,.cart-badge').html(json['items_count']);if(json['items_count']){$('#cart-items,.cart-badge').removeClass('count-zero');$('#cart').addClass('cart-has-items');}else{$('#cart-items,.cart-badge').addClass('count-zero');$('#cart').removeClass('cart-has-items');}},100);if($('html').hasClass('route-checkout-cart')||$('html').hasClass('route-checkout-checkout')){location='index.php?route=checkout/cart';}else{$('.cart-content ul').load(Journal['info_cart_url']);}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['wishlist']=window['wishlist']||{};window['wishlist'].add=function(product_id){$.ajax({url:Journal['add_wishlist_url'],type:'post',data:'product_id='+product_id,dataType:'json',success:function(json){$('.alert').remove();if(json['redirect']){location=json['redirect'];}
if(json['success']){$('[data-toggle="tooltip"]').tooltip('hide');if(json['notification']){show_notification(json['notification']);}else{$('header').after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json['success']+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');}}
$('#wishlist-total span').html(json['total']);$('#wishlist-total').attr('title',json['total']);$('.wishlist-badge').text(json['count']);if(json['count']){$('.wishlist-badge').removeClass('count-zero');}else{$('.wishlist-badge').addClass('count-zero');}
if(Journal['scrollToTop']){$('html, body').animate({scrollTop:0},'slow');}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['compare']=window['compare']||{};window['compare'].add=function(product_id){$.ajax({url:Journal['add_compare_url'],type:'post',data:'product_id='+product_id,dataType:'json',success:function(json){$('.alert').remove();if(json['success']){$('[data-toggle="tooltip"]').tooltip('hide');if(json['notification']){show_notification(json['notification']);}else{$('header').after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json['success']+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');}
$('#compare-total').html(json['total']);$('.compare-badge').text(json['count']);if(json['count']){$('.compare-badge').removeClass('count-zero');}else{$('.compare-badge').addClass('count-zero');}
if(Journal['scrollToTop']){$('html, body').animate({scrollTop:0},'slow');}}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['voucher']=window['voucher']||{};window['voucher'].remove=function(key){$.ajax({url:Journal['remove_cart_url'],type:'post',data:'key='+key,dataType:'json',beforeSend:function(){$('#cart > button').jbutton('loading');},complete:function(){$('#cart > button').jbutton('reset');},success:function(json){setTimeout(function(){$('#cart-total').html(json['total']);$('#cart-items,.cart-badge').html(json['items_count']);if(json['items_count']){$('#cart-items,.cart-badge').removeClass('count-zero');}else{$('#cart-items,.cart-badge').addClass('count-zero');}},100);if($('html').hasClass('route-checkout-cart')||$('html').hasClass('route-checkout-checkout')){location='index.php?route=checkout/cart';}else{$('.cart-content ul').load(Journal['info_cart_url']);}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['update_popup_height']=function(iframe){const iframeDocument=iframe.contentWindow.document;let height=iframeDocument.body.clientHeight+4;const buttons=iframeDocument.querySelector('.button-group-page');if(iframe.contentWindow.Journal['isQuickviewPopup']){height+=20;}
if(iframe.contentWindow.Journal['isOptionsPopup']){height+=buttons.offsetHeight;}
iframe.style.height=height+'px';document.documentElement.classList.add('popup-iframe-loaded');};window['quickview']=function(product_id){product_id=parseInt(product_id,10);$('[data-toggle="tooltip"]').tooltip('hide');var html='';html+='<div class="popup-wrapper popup-quickview popup-iframe">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='			<div class="popup-inner-body">';html+='				<button class="btn popup-close"></button>';html+='				<iframe src="index.php?route=journal3/product&product_id='+product_id+'&popup=quickview'+(Journal['ocv']==4?'&language='+Journal['language']:'')+'" width="100%" height="100%" frameborder="0" onload="update_popup_height(this)"></iframe>';html+='			</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);};window['open_popup']=function(module_id){module_id=parseInt(module_id,10);var html='';html+='<div class="popup-wrapper popup-module popup-iframe">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='		<div class="popup-inner-body">';html+='			<button class="btn popup-close"></button>';html+='		</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);$('.popup-container').css('visibility','hidden');$.ajax({url:'index.php?route=journal3/popup'+Journal['route_separator']+'get&module_id='+module_id+'&popup=module'+(Journal['ocv']==4?'&language='+Journal['language']:''),success:function(html){var $html=$(html);var $popup=$html.siblings('.module-popup');var $style=$html.siblings('style');var $content=$popup.find('.popup-container');$('#popup-style-'+module_id).remove();$('head').append($style.attr('id','popup-style-'+module_id));$('.popup-wrapper').attr('class',$popup.attr('class'));$('.popup-container').html($content.html());$('.popup-container').css('visibility','visible');Journal.lazy();},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+'\r\n'+xhr.statusText+'\r\n'+xhr.responseText);}});};window['open_login_popup']=function(){var html='';html+='<div class="popup-wrapper popup-login popup-iframe">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='		<div class="popup-inner-body">';html+='			<button class="btn popup-close"></button>';html+='			<iframe src="index.php?route=account/login&popup=login'+(Journal['ocv']==4?'&language='+Journal['language']:'')+'" width="100%" height="100%" frameborder="0" onload="update_popup_height(this)"></iframe>';html+='		</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);};window['open_register_popup']=function(){var html='';html+='<div class="popup-wrapper popup-register popup-iframe">';html+='	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>';html+='	<div class="popup-container">';html+='		<div class="popup-body">';html+='		<div class="popup-inner-body">';html+='			<button class="btn popup-close"></button>';html+='			<iframe src="index.php?route=account/register&popup=register'+(Journal['ocv']==4?'&language='+Journal['language']:'')+'" width="100%" height="100%" frameborder="0" onload="update_popup_height(this)"></iframe>';html+='		</div>';html+='		</div>';html+='	</div>';html+='	<div class="popup-bg popup-bg-closable"></div>';html+='</div>';$('.popup-wrapper').remove();$('body').append(html);setTimeout(function(){$('html').addClass('popup-open popup-center');},10);};window['show_notification']=function(opts){opts=$.extend({position:'center',className:'',title:'',image:'',message:'',buttons:[],timeout:Journal.notificationHideAfter},opts);if($('.notification-wrapper-'+opts.position).length===0){$('body').append('<div class="notification-wrapper notification-wrapper-'+opts.position+'"></div>');}
var html='';var buttons=$.map(opts.buttons,function(button){return'<a class="'+button.className+'" href="'+button.href+'">'+button.name+'</a>';});html+='<div class="notification '+opts.className+'">';html+='	<button class="btn notification-close"></button>';html+='	<div class="notification-content">';if(opts.image){html+='		<img src="'+opts.image+'" srcset="'+opts.image+' 1x, '+opts.image2x+' 2x">';}
html+='		<div>';html+='			<div class="notification-title">'+opts.title+'</div>';html+='			<div class="notification-text">'+opts.message+'</div>';html+='		</div>';html+='	</div>';if(buttons&&buttons.length){html+='<div class="notification-buttons">'+buttons.join('\n')+'</div>';}
html+='</div>';var $notification=$(html);$('.notification-wrapper-'+opts.position).append($notification);if(opts.timeout){setTimeout(function(){$notification.find('.notification-close').trigger('click');},opts.timeout);}
return $notification;};window['show_message']=function(opts){opts=$.extend({position:'message',className:'',message:'',timeout:0},opts);parent.$('.notification-wrapper-'+opts.position).remove();parent.show_notification(opts);}
window['loader']=function(el,status){var $el=$(el);if(status){$el.attr('style','position: relative');$el.append('<div class="journal-loading-overlay"><div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div></div>');}else{$el.attr('style','');$el.find('.journal-loading-overlay').remove();}};
/* src: catalog/view/theme/journal3/js/journal.js */
(function($){const $html=$('html');Journal.lazy('image','.lazyload',{loaded:function(el){el.classList.add('lazyloaded');}});if(Journal['isDesktop']){Journal.lazy('tooltip','[data-toggle="tooltip-hover"]',{load:function(el){const $el=$(el);$el.tooltip({container:'body'});}});}
$(document).on('show.bs.tooltip',function(e){const $el=$(e.target);$el.attr('title','');$el.data('tooltipClass')&&$el.data('bs.tooltip').$tip.addClass($el.data('tooltipClass'));});Journal.lazy('dropdown','[data-toggle="dropdown"]',{load:function(el){const $el=$(el);$el.attr('data-toggle','dropdown-hover');}});function clear_dropdowns(){const $trigger=$('> .dropdown-toggle',this);const $dropdown=$(this);const relatedTarget={relatedTarget:$trigger[0]};$dropdown.trigger(e=$.Event('hide.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return;}
$dropdown.removeClass('open');$trigger.attr('aria-expanded','true');$dropdown.trigger(e=$.Event('hidden.bs.dropdown',relatedTarget));}
$(document).on('click','[data-toggle="dropdown-hover"]',function(e){const $trigger=$(this);const $dropdown=$(this).closest('.dropdown');const relatedTarget={relatedTarget:$trigger[0]};const isOpen=$dropdown.hasClass('open');const isLink=$trigger.attr('href')&&!$trigger.attr('href').startsWith('javascript:;');if(isOpen&&isLink){return;}
e.preventDefault();e.stopPropagation();if(!isOpen){$dropdown.trigger(e=$.Event('show.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return;}
$('.dropdown.open').not($dropdown).not($dropdown.parents('.dropdown')).each(clear_dropdowns);$dropdown.addClass('open');$trigger.attr('aria-expanded','false');$dropdown.trigger(e=$.Event('shown.bs.dropdown',relatedTarget));}else{$dropdown.trigger(e=$.Event('hide.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return;}
$dropdown.removeClass('open');$trigger.attr('aria-expanded','true');$dropdown.trigger(e=$.Event('hidden.bs.dropdown',relatedTarget));}});$(document).on('click',function(e){$('.dropdown.open').not($(e.target).parents('.dropdown')).each(clear_dropdowns);});if(Journal['isDesktop']){function dropdownOver(e){if(Journal['isTouch']){return;}
const $trigger=$('> .dropdown-toggle',this);const $dropdown=$(this);const relatedTarget={relatedTarget:$trigger[0]};$dropdown.trigger(e=$.Event('show.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return;}
$dropdown.addClass('open');$trigger.attr('aria-expanded','false');$dropdown.trigger(e=$.Event('shown.bs.dropdown',relatedTarget));}
function dropdownOut(e){if(Journal['isTouch']){return;}
const $trigger=$('> .dropdown-toggle',this);const $dropdown=$(this);const relatedTarget={relatedTarget:$trigger[0]};$dropdown.trigger(e=$.Event('hide.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return;}
$dropdown.removeClass('open');$trigger.attr('aria-expanded','true');$dropdown.trigger(e=$.Event('hidden.bs.dropdown',relatedTarget));}
$(document).hoverIntent({over:dropdownOver,out:dropdownOut,selector:'.dropdown:not([data-overlay]):not(.search-dropdown-page):not(.dropdown .dropdown)'});$(document).on('mouseenter','.dropdown .dropdown',dropdownOver);$(document).on('mouseleave','.dropdown .dropdown',dropdownOut);}
$(document).on('shown.bs.dropdown',function(e){const $dropdown=$(e.target);$dropdown.outerWidth();$dropdown.addClass('animating');});$(document).on('hidden.bs.dropdown',function(e){const $dropdown=$(e.target);$dropdown.removeClass('animating');});$(document).on('show.bs.dropdown',function(e){const el=$(e.target).find('template')[0]||$(' > template',e.target)[0];if(Journal['mobile_header_active']){if(Journal['header_mobile_dropdown_color_scheme']){const menu=$(e.target).find('.dropdown-menu')[0]||$(' > .dropdown-menu',e.target)[0];if(!$(menu).is('[class*="color-scheme-"]')){menu.classList.add(Journal['header_mobile_dropdown_color_scheme']);}}}else{if(Journal['header_dropdown_color_scheme']){const menu=$(e.target).find('.dropdown-menu')[0]||$(' > .dropdown-menu',e.target)[0];if(!$(menu).is('[class*="color-scheme-"]')){menu.classList.add(Journal['header_dropdown_color_scheme']);}}}
if(el){Journal.template(el);Journal.lazy();}});$(document).on('shown.bs.dropdown',function(e){const $el=$(e.target);if($el.data('open-color-scheme')){$el.addClass($el.data('open-color-scheme'));}});$(document).on('hidden.bs.dropdown',function(e){const $el=$(e.target);if($el.data('open-color-scheme')){$el.removeClass($el.data('open-color-scheme'));}});$(document).on('show.bs.popover',function(e){const $el=$(e.target);$el.data('popoverClass')&&$el.data('bs.popover').$tip.addClass($el.data('popoverClass'));});$(document).on('dp.show',function(e){const $el=$(e.target);$el.data('pickerClass')&&$el.data('DateTimePicker').widget.addClass($el.data('pickerClass'));});$(document).on('show.bs.collapse',function(e){$(e.target).parent().addClass('panel-active');});$(document).on('hide.bs.collapse',function(e){$(e.target).parent().removeClass('panel-active');});$(document).on('show.bs.collapse',function(e){const el=$(e.target).find('template')[0];if(el){Journal.template(el);Journal.lazy();}});$(document).on('show.bs.tab',function(e){const href=$(e.target).attr('href');const el=$(href).filter('template')[0];if(el){Journal.template(el);Journal.lazy();}});$(document).on('click','[data-off-canvas]',function(e){e.preventDefault();const $this=$(this);const $container=$('.'+$this.data('off-canvas'));if(Journal['header_offcanvas_color_scheme']){$container[0].classList.add('has-color-scheme',Journal['header_offcanvas_color_scheme']);}
const el=$container.find('template')[0];if(el){Journal.template(el);Journal.lazy();}
$html.addClass('mobile-overlay');$html.addClass($this.data('off-canvas')+'-open');$container.outerWidth();$container.addClass('animating');if($this.data('off-canvas')==='mobile-main-menu-container'){Journal.mobileOffCanvasDropdownOffset&&Journal.mobileOffCanvasDropdownOffset();}});$(document).on('click','.mobile-overlay .site-wrapper, .x',function(){const $this=$(this);$('.mobile-container.animating').removeClass('animating');$html.removeClass('mobile-overlay');setTimeout(function(){$('[data-off-canvas]').each(function(){const $this=$(this);$html.removeClass($this.data('off-canvas')+'-open');});},300);});$(document).on('click','.accordion-menu span[data-toggle="collapse"]',function(e){return false;});$(document).on('click','.accordion-menu a',function(e){const $this=$(this);const $trigger=$('> span[data-toggle="collapse"]',this);const isLink=$this.attr('href')&&!$this.attr('href').startsWith('javascript:');if(Journal['isDesktop']&&isLink){return;}
if($trigger.length&&(!isLink||$trigger.attr('aria-expanded')!=='true')){e.preventDefault();$trigger.trigger('click');}});if(Journal['isDesktop']&&Journal['isAdmin']){Journal.lazy('dimensions','.grid-col > .grid-items > .grid-item',{load:function(el){$(el).one('mouseover',function(){const $this=$(this);$this.attr('data-dimensions',$this.width()+' x '+$this.height());});}});}
if(Journal['isDesktop']&&Journal['isAdmin']){$(document).on('click','[data-edit]',function(){window['__j_edited']=false;const src=Journal.admin_url+'#/'+$(this).data('edit');$('.admin-edit-popup').remove();$html.addClass('is-editor-open');$('body').append(''+'<div class="admin-edit-popup">'+'	<div class="journal-loading"><em class="fa fa-spinner fa-spin"></em></div>'+'	<button class="admin-close-edit" type="button">&times;</button>'+'	<iframe src="'+src+'" onload="$(\'.admin-edit-popup .journal-loading\').remove()" />'+'</div>');});$(document).on('click','.admin-close-edit',function(){if(window['__j_edited']){window.location.reload();}else{$html.removeClass('is-editor-open');$('.admin-edit-popup').remove();}});$(document).on('click','.admin-close-bar',function(){$(this).tooltip('hide');$html.toggleClass('admin-bar-visible');window.localStorage.setItem('j-editor',$html.hasClass('admin-bar-visible')?'visible':'hidden');});}
if(Journal['performanceJSDefer']){$('script[type="text/javascript/defer"]').each(function(){$(this).after($('<script type="text/javascript"/>').text($(this).clone().text())).remove();});}
if(Journal['isLoginPopup']||Journal['isRegisterPopup']||Journal['isQuickviewPopup']||Journal['isOptionsPopup']){$('a[href]').each(function(){const $this=$(this);if(!$this.attr('target')){$this.attr('target','_blank');}
if(!Journal['isDesktop']){$this.removeClass('agree');}});}
if(!('scrollBehavior'in document.documentElement.style)){Journal.load(Journal['assets']['smoothscroll'],'smoothscroll');}
$(document).on('click','[data-scroll-to]',function(e){e.preventDefault();$($(this).data('scroll-to'))[0].scrollIntoView({behavior:'smooth'});});if(Journal['scrollTop']){let scrollTopTimeout;$(window).on('scroll',function(){const scroll=$(this)[0].scrollY;clearTimeout(scrollTopTimeout);if(scroll>500){$('.scroll-top').addClass('scroll-top-active');scrollTopTimeout=setTimeout(function(){$('.scroll-top').removeClass('scroll-top-active');},3000);}else{$('.scroll-top').removeClass('scroll-top-active');}});$('.scroll-top').on('click',function(){window.scrollTo({top:0,behavior:'smooth'});});}
$(document).on('click','.block-expand',function(){$(this).closest('.expand-block').find('.expand-content').toggleClass('block-expanded');});$('.block-map iframe').on('load',function(){$('.block-map .journal-loading').hide();});if(Journal['rippleStatus']&&Journal['rippleSelectors']){Journal.lazy('ripple',Journal['rippleSelectors'],{load:function(el){const ripple=document.createElement('small');el.classList.add('ripple');el.appendChild(ripple);el.addEventListener('click',function(e){e=e.touches?e.touches[0]:e;const r=el.getBoundingClientRect(),d=Math.sqrt(Math.pow(r.width,2)+Math.pow(r.height,2))*2;el.style.cssText=`--s: 0; --o: 1;`;el.offsetTop;el.style.cssText=`--t: 1; --o: 0; --d: ${d}; --x:${e.clientX - r.left}; --y:${e.clientY - r.top};`});}});}
$(function(){$('#form-currency .currency-select').off('click').on('click',function(e){e.preventDefault();$('#form-currency input[name=\'code\']').val($(this).data('name'));$('#form-currency').submit();});if(Journal['ocv']!==4){$('#form-language .language-select').off('click').on('click',function(e){e.preventDefault();$('#form-language input[name=\'code\']').val($(this).data('name'));$('#form-language').submit();});}});$(document).delegate('[data-open-popup]','click',function(e){const $template=$($(this).data('open-popup'));$('.popup-wrapper').remove();$('body').append($template.html());setTimeout(function(){$('html').addClass('popup-open popup-center');Journal.lazy();},10);});$(document).delegate('[data-bs-dismiss="modal"]','click',function(e){$(e.target).closest('.modal').modal('hide');});function flyoutOffset(el){el.style.setProperty('--element-top-offset',el.getBoundingClientRect().top+'px');}
$(document).on('shown.bs.dropdown',function(e){const $parent=$(e.relatedTarget).parent();if($parent.hasClass('flyout-menu-item')){const $dropdown=$('> .j-dropdown',$parent);flyoutOffset($dropdown[0]);}});$(window).on('scroll',function(){if(!Journal['mobile_header_active']){document.querySelectorAll('.flyout-menu > .j-menu > .flyout-menu-item.mega-menu > .j-dropdown').forEach(flyoutOffset);}});})(jQuery);(function($){$('#content > h1').addClass('title page-title');})(jQuery);(function($){var $html=$('html');var $body=$('body');$(document).delegate('.btn-extra','click',function(){parent.window.__popup_url=$(this).data('product_url')||'';});var $desktop_main_menu_wrapper=$('.desktop-main-menu-wrapper');var $desktop_cart_wrapper=$('.desktop-cart-wrapper');var $desktop_search_wrapper=$('.desktop-search-wrapper');$desktop_main_menu_wrapper.delegate('.main-menu > .j-menu > .dropdown','mouseover',function(){$body.addClass('menu-open');});$desktop_main_menu_wrapper.delegate('.main-menu','mouseleave',function(){$body.removeClass('menu-open');});$desktop_cart_wrapper.delegate('#cart','mouseover',function(){$body.addClass('cart-open');});$desktop_cart_wrapper.delegate('#cart','mouseleave',function(){$body.removeClass('cart-open');});$desktop_search_wrapper.delegate('.search-categories','mouseover',function(){$body.addClass('search-open');});$desktop_search_wrapper.delegate('.search-categories','mouseleave',function(){$body.removeClass('search-open');});$('.links-menu .module-title').addClass('closed');$('.links-menu .module-title').click(function(){$(this).toggleClass('closed');});const target=document.querySelector(Journal['isPopup']?'html':'.popup-inner-body > .grid-rows');if(target&&parent.document.documentElement.classList.contains('popup-open')){parent.document.addEventListener('wheel',function(event){target.scrollTop+=event.deltaY;});}
if(Journal['isOptionsPopup']){const $el=document.querySelector('.popup-options .button-group-page');document.documentElement.style.setProperty('--popup-fixed-buttons',`${$el ? $el.offsetHeight : 0}px`);}
if(Journal['isQuickviewPopup']){const $el=document.querySelector('.popup-quickview .button-group-page');document.documentElement.style.setProperty('--popup-fixed-buttons',`${$el ? $el.offsetHeight : 0}px`);}
if(document.documentElement.classList.contains('route-product-manufacturer')){const $el=document.querySelector('.brand-index');document.documentElement.style.setProperty('--brand-index-height',`${$el ? $el.offsetHeight : 0}px`);}
if(document.documentElement.classList.contains('route-product-product')){const $el=document.querySelector('.button-group-page');document.documentElement.style.setProperty('--fixed-product-buttons',`${$el ? $el.offsetHeight : 0}px`);}
if(document.querySelectorAll('.buttons > div').length>1&&document.querySelectorAll('.buttons > div > .agree').length>0){document.querySelector('.buttons').classList.add('dual-agree');}
$(function(){$('.product-img, .product-image img').hover(function(e){$(this).attr('data-title',$(this).attr('title'));$(this).removeAttr('title');},function(e){$(this).attr('title',$(this).attr('data-title'));});});$('#information-information #content table').each(function(){$(this).wrap('<div class="table-responsive"></div>')});})(jQuery);(function($){var $html=$('html');var $body=$('body');if($html.hasClass('footer-reveal')){var footerHeight=$('.desktop.footer-reveal footer').outerHeight();$('.desktop body').css('padding-bottom',footerHeight);}})(jQuery);
/* src: catalog/view/theme/journal3/js/stepper.js */
(function($){Journal['stepperDecimals']=+Journal['stepperDecimals']||0;function stepper(el){const $this=$(el);const $input=$this.find('input[name^="quantity"]');const minimum=parseFloat($input.data('minimum'))||1;function change(value,delta){value=value||0;delta=delta||0;if(!Journal['stepperDecimals']){delta=1;}
const val=Math.max((+$input.val()||0)+value*delta,minimum);$input.val(val.toFixed(Journal['stepperDecimals']));$input.trigger('change');}
$this.find('.fa-angle-up').on('click',function(e){change(1,e.shiftKey?0.1:1);});$this.find('.fa-angle-down').on('click',function(e){change(-1,e.shiftKey?0.1:1);});$input.on('keydown',function(e){switch(e.key){case'ArrowUp':e.preventDefault();change(1,e.shiftKey?0.1:1);break;case'ArrowDown':e.preventDefault();change(-1,e.shiftKey?0.1:1);break;}});$input.on('blur',function(){change();});}
if(Journal['stepperStatus']){Journal.lazy('stepper','.stepper',{load:function(el){stepper(el);}});}})(jQuery);
/* src: catalog/view/theme/journal3/js/countdown.js */
(function($){function countdown(el){const $this=$(el);$this.countdown({date:$this.data('date'),render:function(data){return $(this.el).html('<div>'+this.leadingZeros(data.days,2)+' <span>'+Journal['countdownDay']+'</span></div>'+'<div>'+this.leadingZeros(data.hours,2)+' <span>'+Journal['countdownHour']+'</span></div>'+'<div>'+this.leadingZeros(data.min,2)+' <span>'+Journal['countdownMin']+'</span></div>'+'<div>'+this.leadingZeros(data.sec,2)+' <span>'+Journal['countdownSec']+'</span></div>');}});}
Journal.lazy('countdown','.countdown',{load:function(el){Journal.load(Journal['assets']['countdown'],'countdown',function(){countdown(el);});}});})(jQuery);
/* src: catalog/view/theme/journal3/js/search.js */
(function($){const $search=$('#search');const $search_input=$search.find('input[name=\'search\']');const $search_button=$('.search-button');function search(){const query=$search_input.val().trim();if(!query){return false;}
let url=Journal['search_url'].replace('__QUERY__',query);const category_id=parseInt($search_input.attr('data-category_id'),10);if(category_id){url+='&category_id='+category_id.toString();if(Journal['searchStyleSearchAutoSuggestSubCategories']){url+='&sub_category=1';}}
if(Journal['searchStyleSearchAutoSuggestDescription']){url+='&description=1';}
window.location.href=url;}
$(document).on('click','.search-categories li',function(e){const $this=$(this);$('.search-categories-button').html($this.html());$search_input.attr('data-category_id',$this.attr('data-category_id'));$search_input.focus();});$search.on('shown.bs.dropdown',function(e){if(e.relatedTarget.classList.contains('search-trigger')){document.documentElement.classList.add('search-page-open');}});$search.on('hide.bs.dropdown',function(e){if(e.relatedTarget.classList.contains('search-trigger')){document.documentElement.classList.remove('search-page-open');}});$search.on('shown.bs.dropdown',function(){$search_input.focus();});$search_input.on('focus',function(){$(this).closest('.header-search').addClass('focused');});$search_input.on('blur',function(){$(this).closest('.header-search').removeClass('focused');});$(function(){$search_button.off('click').on('click',function(e){search();});$search_input.off('keydown').on('keydown',function(e){if(e.keyCode===13){search();}});});if(Journal['searchStyleSearchAutoSuggestStatus']){$('#search-input-el').one('focus',function(){Journal.load(Journal['assets']['typeahead'],'typeahead',function(){$search_input.typeahead({classNames:{menu:`tt-menu ${Journal[Journal['mobile_header_active'] ? 'header_mobile_search_results_color_scheme' : 'header_search_results_color_scheme']}`},hint:true,minLength:1,autoSelect:true},{async:true,display:'name',limit:Infinity,source:function(query,processSync,processAsync){let url=Journal['autosuggest_url'].replace('__QUERY__',query);const category_id=parseInt($search_input.attr('data-category_id'),10);if(category_id){url+='&category_id='+category_id.toString();if(Journal['searchStyleSearchAutoSuggestSubCategories']){url+='&sub_category=1';}}
if(Journal['searchStyleSearchAutoSuggestDescription']){url+='&description=1';}
if(window['__journal_search_timeout']){clearTimeout(window['__journal_search_timeout']);}
window['__journal_search_timeout']=setTimeout(function(){if(window['__journal_search_ajax']){window['__journal_search_ajax'].abort();}
window['__journal_search_ajax']=$.get({url:url,dataType:'json',success:function(json){return processAsync(json['response']);}});},250);},templates:{suggestion:function(data){if(data['view_more']){return'<div class="search-result view-more"><a href="'+data['href']+'">'+data['name']+'</a></div>';}
if(data['no_results']){return'<div class="search-result no-results"><a>'+data['name']+'</a></div>';}
var html='';html+='<div class="search-result"><a href="'+data['href']+'">';if(data['thumb']){html+='<img src="'+data['thumb']+'" srcset="'+data['thumb']+' 1x, '+data['thumb2']+' 2x" />';}
var classes=[];if(data['quantity']<=0){classes.push('out-of-stock');}
if(!data['price_value']){classes.push('has-zero-price');}
html+='<span class="'+classes.join(' ')+'">';html+='<span class="product-name">'+data['name']+'</span>';if(data['price']){if(data['special']){html+='<span><span class="price-old">'+data['price']+'</span><span class="price-new">'+data['special']+'</span></span>';}else{html+='<span class="price">'+data['price']+'</span>';}}
html+='</span>';html+='</a></div>';return html;}}});$('.header-search > span > div').addClass('tt-empty');$('#search-input-el').trigger('focus');$('.mobile .tt-menu').on('click',function(e){e.stopPropagation();});});});}})(jQuery);
/* src: catalog/view/theme/journal3/js/carousel.js */
(function($){function carousel_swiper(el){const $content=$('#content');const $column_left=$('#column-left');const $column_right=$('#column-right');const $this=$(el);let c='c0';if($content.has($this).length){c='c'+window['Journal']['columnsCount'];}else if($column_left.has($this).length||$column_right.has($this).length){c='sc';}
const itemsPerRow=$this.data('items-per-row')?$this.data('items-per-row')[c]:{0:{items:1,spacing:0}};const breakpoints={};$.each(itemsPerRow,function(v,k){breakpoints[v]={slidesPerView:parseInt(k.items,10),slidesPerGroup:parseInt(k.items,10),spaceBetween:parseInt(k.spacing,10)}});const options=$.extend({init:false,slidesPerView:parseInt(itemsPerRow[0].items,10),slidesPerGroup:parseInt(itemsPerRow[0].items,10),spaceBetween:parseInt(itemsPerRow[0].spacing,10),breakpoints:breakpoints,observer:true,observeParents:true,paginationClickable:true,preventClicks:false,preventClicksPropagation:false,simulateTouch:true,watchSlidesProgress:true,watchSlidesVisibility:true,navigation:{nextEl:$this.find('.swiper-button-next'),prevEl:$this.find('.swiper-button-prev')},pagination:{el:$this.find('.swiper-pagination'),type:'bullets',clickable:true},scrollbar:$this.find('.swiper-scrollbar'),scrollbarHide:false,scrollbarDraggable:true},$this.data('options'));if(options.loop&&($(el).find('.swiper-slide').length<2)){options.loop=false;}
if(!Journal.isDesktop){options.a11y=false;}
const swiper=new Swiper($('.swiper-container',el),options);function checkPages(){if(swiper.isBeginning&&swiper.isEnd){$this.removeClass('swiper-has-pages');}else{$this.addClass('swiper-has-pages');}}
swiper.on('init',checkPages);swiper.on('resize',checkPages);swiper.init();if(options.autoplay){if(options.pauseOnHover){$('.swiper-container',el).hover(function(){swiper.autoplay.stop();},function(){swiper.autoplay.start();});}
swiper.on('observerUpdate',function(){const visible=$(swiper.$el).is(':visible');const running=swiper.autoplay.running;if(visible&&!running){swiper.autoplay.start();}
if(!visible&&running){swiper.autoplay.stop();}});}
$this.data('swiper',swiper);$this.trigger($.Event('jcarousel:init',{swiper:swiper}));}
Journal.lazy('carousel_swiper','.swiper',{load:function(el){if(el.querySelectorAll('.swiper-slide').length>1){Journal.load(Journal['assets']['swiper'],'swiper',function(){carousel_swiper(el);});}}});function carousel_grid(el){const gridItemsEl=el.querySelector('.auto-grid-items');const progressScrollBar=el.querySelector('.auto-carousel-bar');const progressScrollEl=el.querySelector('.auto-carousel-thumb');const progressFillEl=el.querySelector('.auto-carousel-fill');function onScroll(){const p=Math.round(gridItemsEl.scrollLeft/(gridItemsEl.scrollWidth-gridItemsEl.clientWidth)*1000);const x=Math.round((progressScrollBar.clientWidth-progressScrollEl.clientWidth)*p/100);if(Math.abs(p)<=0){gridItemsEl.parentElement.classList.add('no-scroll-prev');}else{gridItemsEl.parentElement.classList.remove('no-scroll-prev');}
if(Math.abs(p)>=1000){gridItemsEl.parentElement.classList.add('no-scroll-next');}else{gridItemsEl.parentElement.classList.remove('no-scroll-next');}
progressScrollEl.style.transform='translate3d('+x/10+'px, -50%, 0)';progressScrollEl.style.width=Math.round(progressScrollBar.clientWidth/gridItemsEl.scrollWidth*gridItemsEl.clientWidth)+'px';progressFillEl.style.transform='translate3d(0, -50%, 0) scaleX(calc('+p/1000+' * var(--progressDirection, 1)))';}
function onResize(){if(gridItemsEl.scrollWidth>gridItemsEl.clientWidth){gridItemsEl.parentElement.classList.remove('no-scroll');}else{gridItemsEl.parentElement.classList.add('no-scroll');}}
function slideByLeft(delta){const scrollBy=Math.max(parseInt(getComputedStyle(gridItemsEl).getPropertyValue('--scroll-by'),10),1);const gap=Math.max(parseInt(getComputedStyle(gridItemsEl).getPropertyValue('gap'),10),0);gridItemsEl.classList.remove('is-dragging');gridItemsEl.scrollBy({behavior:'smooth',left:(Journal['isRTL']?-1:1)*scrollBy*delta*gridItemsEl.firstElementChild.clientWidth+(gap*scrollBy)});}
function slideByRight(delta){const scrollBy=Math.max(parseInt(getComputedStyle(gridItemsEl).getPropertyValue('--scroll-by'),10),1);const gap=Math.max(parseInt(getComputedStyle(gridItemsEl).getPropertyValue('gap'),10),0);gridItemsEl.classList.remove('is-dragging');gridItemsEl.scrollBy({behavior:'smooth',left:(Journal['isRTL']?-1:1)*scrollBy*delta*gridItemsEl.firstElementChild.clientWidth-(gap*scrollBy)});}
const prev=el.querySelector('.auto-carousel-prev');if(prev){prev.addEventListener('click',function(){slideByRight(-1);});}
const next=el.querySelector('.auto-carousel-next');if(next){next.addEventListener('click',function(){slideByLeft(1);});}
if(gridItemsEl){gridItemsEl.addEventListener('scroll',onScroll);new ResizeObserver(function(){onResize();onScroll();}).observe(gridItemsEl);}
if(gridItemsEl&&Journal['isDesktop']){mouseDrag();}
function mouseDrag(){let isDown=false;let startX;let scrollLeft;gridItemsEl.addEventListener('mousedown',(e)=>{if(e.button!==0){return;}
isDown=true;startX=e.pageX-gridItemsEl.offsetLeft;scrollLeft=gridItemsEl.scrollLeft;cancelMomentumTracking();});gridItemsEl.addEventListener('mousemove',function(e){if(!isDown)return;gridItemsEl.classList.add('is-dragging');gridItemsEl.classList.add('is-gliding');e.preventDefault();const x=e.pageX-gridItemsEl.offsetLeft;const walk=(x-startX);const prevScrollLeft=gridItemsEl.scrollLeft;gridItemsEl.scrollLeft=scrollLeft-walk;velX=gridItemsEl.scrollLeft-prevScrollLeft;});gridItemsEl.addEventListener('mouseup',function(e){if(e.button!==0){return;}
isDown=false;beginMomentumTracking();});let velX=0;let momentumID;gridItemsEl.addEventListener('wheel',function(){cancelMomentumTracking();gridItemsEl.classList.remove('is-dragging');},{passive:true});function beginMomentumTracking(){cancelMomentumTracking();momentumID=requestAnimationFrame(momentumLoop);gridItemsEl.classList.add('is-gliding');}
function cancelMomentumTracking(){cancelAnimationFrame(momentumID);}
function momentumLoop(){gridItemsEl.scrollLeft+=velX;gridItemsEl.scrollBehavior='smooth';velX*=.9;if(Math.abs(velX)>.45){momentumID=requestAnimationFrame(momentumLoop);}else{gridItemsEl.classList.remove('is-gliding','is-dragging');}}}
const $thumb=el.querySelector('.auto-carousel-thumb');const $bar=el.querySelector('.auto-carousel-bar');if($thumb&&$bar){let startX;let rectBar;let max;function thumbDrag(e){let currentX=e.type==='touchmove'?e.touches[0].pageX:e.pageX;const p=Math.min(1,Math.max(0,(currentX-rectBar.x-startX)/rectBar.width));gridItemsEl.scrollLeft=Math.round(p*max);}
function thumbStopDrag(e){e.preventDefault();document.body.style.userSelect=null;gridItemsEl.classList.remove('is-dragging');document.removeEventListener('touchmove',thumbDrag);document.removeEventListener('mousemove',thumbDrag);document.removeEventListener('touchend',thumbStopDrag);document.removeEventListener('mouseup',thumbStopDrag);}
function thumbStartDrag(e){if(e.button!==0){return;}
e.preventDefault();startX=e.type==='touchstart'?e.touches[0].pageX:e.pageX;startX-=e.target.getBoundingClientRect().x;rectBar=$bar.getBoundingClientRect();max=gridItemsEl.scrollWidth-gridItemsEl.clientWidth;document.body.style.userSelect='none';gridItemsEl.classList.add('is-dragging');document.addEventListener('touchmove',thumbDrag);document.addEventListener('mousemove',thumbDrag);document.addEventListener('touchend',thumbStopDrag,{once:true});document.addEventListener('mouseup',thumbStopDrag,{once:true});}
$thumb.addEventListener('touchstart',thumbStartDrag,{passive:true});$thumb.addEventListener('mousedown',thumbStartDrag);}}
Journal.lazy('carousel_grid','.auto-grid',{load:function(el){carousel_grid(el);}});})(jQuery);
/* src: catalog/view/theme/journal3/lib/ias/jquery-ias.min.js */
/*!
 * Infinite Ajax Scroll v2.3.1
 * A jQuery plugin for infinite scrolling
 * https://infiniteajaxscroll.com
 *
 * Commercial use requires one-time purchase of a commercial license
 * https://infiniteajaxscroll.com/docs/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright (c) 2018 Webcreate (Jeroen Fiege)
 */
var IASCallbacks=function(t){return this.list=[],this.fireStack=[],this.isFiring=!1,this.isDisabled=!1,this.Deferred=t.Deferred,this.fire=function(t){var i=t[0],e=t[1],n=t[2];this.isFiring=!0;for(var r=0,s=this.list.length;s>r;r++)if(null!=this.list[r]&&!1===this.list[r].fn.apply(i,n)){e.reject();break}this.isFiring=!1,e.resolve(),this.fireStack.length&&this.fire(this.fireStack.shift())},this.inList=function(t,i){for(var e=i=i||0,n=this.list.length;n>e;e++)if(this.list[e].fn===t||t.guid&&this.list[e].fn.guid&&t.guid===this.list[e].fn.guid)return e;return-1},this};IASCallbacks.prototype={add:function(t,i){var e={fn:t,priority:i};i=i||0;for(var n=0,r=this.list.length;r>n;n++)if(i>this.list[n].priority)return this.list.splice(n,0,e),this;return this.list.push(e),this},remove:function(t){for(var i=0;(i=this.inList(t,i))>-1;)this.list.splice(i,1);return this},has:function(t){return this.inList(t)>-1},fireWith:function(t,i){var e=this.Deferred();return this.isDisabled?e.reject():(i=[t,e,(i=i||[]).slice?i.slice():i],this.isFiring?this.fireStack.push(i):this.fire(i),e)},disable:function(){this.isDisabled=!0},enable:function(){this.isDisabled=!1}},function(t){"use strict";var i=function(i,e){return this.itemsContainerSelector=e.container,this.itemSelector=e.item,this.nextSelector=e.next,this.paginationSelector=e.pagination,this.$scrollContainer=i,this.$container=window===i.get(0)?t(document):i,this.defaultDelay=e.delay,this.negativeMargin=e.negativeMargin,this.nextUrl=null,this.isBound=!1,this.isPaused=!1,this.isInitialized=!1,this.jsXhr=!1,this.listeners={next:new IASCallbacks(t),load:new IASCallbacks(t),loaded:new IASCallbacks(t),render:new IASCallbacks(t),rendered:new IASCallbacks(t),scroll:new IASCallbacks(t),noneLeft:new IASCallbacks(t),ready:new IASCallbacks(t)},this.extensions=[],this.scrollHandler=function(){if(this.isBound&&!this.isPaused){var t=this.getCurrentScrollOffset(this.$scrollContainer),i=this.getScrollThreshold();-1!=i&&(this.fire("scroll",[t,i]),t>=i&&this.next())}},this.getItemsContainer=function(){return t(this.itemsContainerSelector,this.$container)},this.getLastItem=function(){return t(this.itemSelector,this.getItemsContainer().get(0)).last()},this.getFirstItem=function(){return t(this.itemSelector,this.getItemsContainer().get(0)).first()},this.getScrollThreshold=function(t){var i;return t=(t=t||this.negativeMargin)>=0?-1*t:t,0===(i=this.getLastItem()).length?-1:i.offset().top+i.height()+t},this.getCurrentScrollOffset=function(t){var i,e=t.height();return i=window===t.get(0)?t.scrollTop():t.offset().top,(-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod"))&&(e+=80),i+e},this.getNextUrl=function(i){return i=i||this.$container,t(this.nextSelector,i).last().attr("href")},this.load=function(i,e,n){var r,s,o=this,h=[],a=+new Date;n=n||this.defaultDelay;var A={url:i,ajaxOptions:{dataType:"html"}};return o.fire("load",[A]),this.jsXhr=t.ajax(A.url,A.ajaxOptions).done(t.proxy(function(i){0===(r=t(this.itemsContainerSelector,i).eq(0)).length&&(r=t(i).filter(this.itemsContainerSelector).eq(0)),r&&r.find(this.itemSelector).each(function(){h.push(this)}),o.fire("loaded",[i,h]),e&&(s=+new Date-a,n>s?setTimeout(function(){e.call(o,i,h)},n-s):e.call(o,i,h))},o)),this.jsXhr},this.render=function(i,e){var n=this,r=this.getLastItem(),s=0,o=this.fire("render",[i]);o.done(function(){t(i).hide(),r.after(i),t(i).fadeIn(400,function(){++s<i.length||(n.fire("rendered",[i]),e&&e())})}),o.fail(function(){e&&e()})},this.hidePagination=function(){this.paginationSelector&&t(this.paginationSelector,this.$container).hide()},this.restorePagination=function(){this.paginationSelector&&t(this.paginationSelector,this.$container).show()},this.throttle=function(i,e){var n,r,s=0;return n=function(){function t(){s=+new Date,i.apply(n,o)}var n=this,o=arguments,h=+new Date-s;r?clearTimeout(r):t(),h>e?t():r=setTimeout(t,e)},t.guid&&(n.guid=i.guid=i.guid||t.guid++),n},this.fire=function(t,i){return this.listeners[t].fireWith(this,i)},this.pause=function(){this.isPaused=!0},this.resume=function(){this.isPaused=!1},this};i.prototype.initialize=function(){if(this.isInitialized)return!1;var t=!!("onscroll"in this.$scrollContainer.get(0)),i=this.getCurrentScrollOffset(this.$scrollContainer),e=this.getScrollThreshold();return!!t&&(this.hidePagination(),this.bind(),this.nextUrl=this.getNextUrl(),this.nextUrl||this.fire("noneLeft",[this.getLastItem()]),this.nextUrl&&i>=e?(this.next(),this.one("rendered",function(){this.isInitialized=!0,this.fire("ready")})):(this.isInitialized=!0,this.fire("ready")),this)},i.prototype.reinitialize=function(){this.isInitialized=!1,this.unbind(),this.initialize()},i.prototype.bind=function(){if(!this.isBound){this.$scrollContainer.on("scroll",t.proxy(this.throttle(this.scrollHandler,150),this));for(var i=0,e=this.extensions.length;e>i;i++)this.extensions[i].bind(this);this.isBound=!0,this.resume()}},i.prototype.unbind=function(){if(this.isBound){this.$scrollContainer.off("scroll",this.scrollHandler);for(var t=0,i=this.extensions.length;i>t;t++)void 0!==this.extensions[t].unbind&&this.extensions[t].unbind(this);this.isBound=!1}},i.prototype.destroy=function(){try{this.jsXhr.abort()}catch(t){}this.unbind(),this.$scrollContainer.data("ias",null)},i.prototype.on=function(i,e,n){if(void 0===this.listeners[i])throw new Error('There is no event called "'+i+'"');return n=n||0,this.listeners[i].add(t.proxy(e,this),n),this.isInitialized&&("ready"===i?t.proxy(e,this)():"noneLeft"!==i||this.nextUrl||t.proxy(e,this)()),this},i.prototype.one=function(t,i){var e=this,n=function(){e.off(t,i),e.off(t,n)};return this.on(t,i),this.on(t,n),this},i.prototype.off=function(t,i){if(void 0===this.listeners[t])throw new Error('There is no event called "'+t+'"');return this.listeners[t].remove(i),this},i.prototype.next=function(){var t=this.nextUrl,i=this;if(!t)return!1;this.pause();var e=this.fire("next",[t]);return e.done(function(){i.load(t,function(t,e){i.render(e,function(){i.nextUrl=i.getNextUrl(t),i.nextUrl||i.fire("noneLeft",[i.getLastItem()]),i.resume()})})}),e.fail(function(){i.resume()}),!0},i.prototype.extension=function(t){if(void 0===t.bind)throw new Error('Extension doesn\'t have required method "bind"');return void 0!==t.initialize&&t.initialize(this),this.extensions.push(t),this.isBound&&this.reinitialize(),this},t.ias=function(i){var e=t(window);return e.ias.apply(e,arguments)},t.fn.ias=function(e){var n=Array.prototype.slice.call(arguments),r=this;return this.each(function(){var s=t(this),o=s.data("ias"),h=t.extend({},t.fn.ias.defaults,s.data(),"object"==typeof e&&e);if(o||(s.data("ias",o=new i(s,h)),h.initialize&&t(document).ready(t.proxy(o.initialize,o))),"string"==typeof e){if("function"!=typeof o[e])throw new Error('There is no method called "'+e+'"');n.shift(),o[e].apply(o,n)}r=o}),r},t.fn.ias.defaults={item:".item",container:".listing",next:".next",pagination:!1,delay:600,negativeMargin:10,initialize:!0}}(jQuery);var IASHistoryExtension=function(t){return t=jQuery.extend({},this.defaults,t),this.ias=null,this.prevSelector=t.prev,this.prevUrl=null,this.listeners={prev:new IASCallbacks(jQuery)},this.onPageChange=function(t,i,e){if(window.history&&window.history.replaceState){var n=history.state;try{var u=new URL(e);u.host=window.location.host,u.hostname=window.location.hostname,u.protocol=window.location.protocol,e=u.toString()}catch(o){};history.replaceState(n,document.title,e)}},this.onScroll=function(t,i){var e=this.getScrollThresholdFirstItem();this.prevUrl&&(e>=(t-=this.ias.$scrollContainer.height())&&this.prev())},this.onReady=function(){var t=this.ias.getCurrentScrollOffset(this.ias.$scrollContainer);this.getScrollThresholdFirstItem()>=(t-=this.ias.$scrollContainer.height())&&this.prev()},this.getPrevUrl=function(t){return t||(t=this.ias.$container),jQuery(this.prevSelector,t).last().attr("href")},this.getScrollThresholdFirstItem=function(){var t;return 0===(t=this.ias.getFirstItem()).length?-1:t.offset().top},this.renderBefore=function(t,i){var e=this.ias,n=e.getFirstItem(),r=0;e.fire("render",[t]),jQuery(t).hide(),n.before(t),jQuery(t).fadeIn(400,function(){++r<t.length||(e.fire("rendered",[t]),i&&i())})},this};IASHistoryExtension.prototype.initialize=function(t){var i=this;this.ias=t,jQuery.extend(t.listeners,this.listeners),t.prev=function(){return i.prev()},this.prevUrl=this.getPrevUrl()},IASHistoryExtension.prototype.bind=function(t){t.on("pageChange",jQuery.proxy(this.onPageChange,this)),t.on("scroll",jQuery.proxy(this.onScroll,this)),t.on("ready",jQuery.proxy(this.onReady,this))},IASHistoryExtension.prototype.unbind=function(t){t.off("pageChange",this.onPageChange),t.off("scroll",this.onScroll),t.off("ready",this.onReady)},IASHistoryExtension.prototype.prev=function(){var t=this.prevUrl,i=this,e=this.ias;if(!t)return!1;e.pause();var n=e.fire("prev",[t]);return n.done(function(){e.load(t,function(t,n){i.renderBefore(n,function(){i.prevUrl=i.getPrevUrl(t),e.resume(),i.prevUrl&&i.prev()})})}),n.fail(function(){e.resume()}),!0},IASHistoryExtension.prototype.defaults={prev:".prev"};var IASNoneLeftExtension=function(t){return t=jQuery.extend({},this.defaults,t),this.ias=null,this.uid=(new Date).getTime(),this.html=t.html.replace("{text}",t.text),this.showNoneLeft=function(){var t=jQuery(this.html).attr("id","ias_noneleft_"+this.uid);this.ias.getLastItem().after(t),t.fadeIn()},this};IASNoneLeftExtension.prototype.bind=function(t){this.ias=t,t.on("noneLeft",jQuery.proxy(this.showNoneLeft,this))},IASNoneLeftExtension.prototype.unbind=function(t){t.off("noneLeft",this.showNoneLeft)},IASNoneLeftExtension.prototype.defaults={text:"You reached the end.",html:'<div class="ias-noneleft" style="text-align: center;">{text}</div>'};var IASPagingExtension=function(){return this.ias=null,this.pagebreaks=[[0,document.location.toString()]],this.lastPageNum=1,this.enabled=!0,this.listeners={pageChange:new IASCallbacks(jQuery)},this.onScroll=function(t,i){if(this.enabled){var e,n=this.ias,r=this.getCurrentPageNum(t),s=this.getCurrentPagebreak(t);this.lastPageNum!==r&&(e=s[1],n.fire("pageChange",[r,t,e])),this.lastPageNum=r}},this.onNext=function(t){var i=this.ias.getCurrentScrollOffset(this.ias.$scrollContainer);this.pagebreaks.push([i,t]);var e=this.getCurrentPageNum(i)+1;this.ias.fire("pageChange",[e,i,t]),this.lastPageNum=e},this.onPrev=function(t){var i=this,e=i.ias,n=e.getCurrentScrollOffset(e.$scrollContainer)-e.$scrollContainer.height(),r=e.getFirstItem();this.enabled=!1,this.pagebreaks.unshift([0,t]),e.one("rendered",function(){for(var s=1,o=i.pagebreaks.length;o>s;s++)i.pagebreaks[s][0]=i.pagebreaks[s][0]+r.offset().top;var h=i.getCurrentPageNum(n)+1;e.fire("pageChange",[h,n,t]),i.lastPageNum=h,i.enabled=!0})},this};IASPagingExtension.prototype.initialize=function(t){this.ias=t,jQuery.extend(t.listeners,this.listeners)},IASPagingExtension.prototype.bind=function(t){try{t.on("prev",jQuery.proxy(this.onPrev,this),this.priority)}catch(t){}t.on("next",jQuery.proxy(this.onNext,this),this.priority),t.on("scroll",jQuery.proxy(this.onScroll,this),this.priority)},IASPagingExtension.prototype.unbind=function(t){try{t.off("prev",this.onPrev)}catch(t){}t.off("next",this.onNext),t.off("scroll",this.onScroll)},IASPagingExtension.prototype.getCurrentPageNum=function(t){for(var i=this.pagebreaks.length-1;i>0;i--)if(t>this.pagebreaks[i][0])return i+1;return 1},IASPagingExtension.prototype.getCurrentPagebreak=function(t){for(var i=this.pagebreaks.length-1;i>=0;i--)if(t>this.pagebreaks[i][0])return this.pagebreaks[i];return null},IASPagingExtension.prototype.priority=500;var IASSpinnerExtension=function(t){return t=jQuery.extend({},this.defaults,t),this.ias=null,this.uid=(new Date).getTime(),this.src=t.src,this.html=t.html.replace("{src}",this.src),this.showSpinner=function(){var t=this.getSpinner()||this.createSpinner();this.ias.getLastItem().after(t),t.fadeIn()},this.showSpinnerBefore=function(){var t=this.getSpinner()||this.createSpinner();this.ias.getFirstItem().before(t),t.fadeIn()},this.removeSpinner=function(){this.hasSpinner()&&this.getSpinner().remove()},this.getSpinner=function(){var t=jQuery("#ias_spinner_"+this.uid);return t.length>0&&t},this.hasSpinner=function(){return jQuery("#ias_spinner_"+this.uid).length>0},this.createSpinner=function(){var t=jQuery(this.html).attr("id","ias_spinner_"+this.uid);return t.hide(),t},this};IASSpinnerExtension.prototype.bind=function(t){this.ias=t,t.on("next",jQuery.proxy(this.showSpinner,this)),t.on("render",jQuery.proxy(this.removeSpinner,this));try{t.on("prev",jQuery.proxy(this.showSpinnerBefore,this))}catch(t){}},IASSpinnerExtension.prototype.unbind=function(t){t.off("next",this.showSpinner),t.off("render",this.removeSpinner);try{t.off("prev",this.showSpinnerBefore)}catch(t){}},IASSpinnerExtension.prototype.defaults={src:"data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==",html:'<div class="ias-spinner" style="text-align: center;"><img src="{src}"/></div>'};var IASTriggerExtension=function(t){return t=jQuery.extend({},this.defaults,t),this.ias=null,this.html=t.html.replace("{text}",t.text),this.htmlPrev=t.htmlPrev.replace("{text}",t.textPrev),this.enabled=!0,this.count=0,this.offset=t.offset,this.$triggerNext=null,this.$triggerPrev=null,this.showTriggerNext=function(){if(!this.enabled)return!0;if(!1===this.offset||++this.count<this.offset)return!0;var t=this.$triggerNext||(this.$triggerNext=this.createTrigger(this.next,this.html));return this.ias.getLastItem().after(t),t.fadeIn(),!1},this.showTriggerPrev=function(){if(!this.enabled)return!0;var t=this.$triggerPrev||(this.$triggerPrev=this.createTrigger(this.prev,this.htmlPrev));return this.ias.getFirstItem().before(t),t.fadeIn(),!1},this.onRendered=function(){this.enabled=!0},this.createTrigger=function(t,i){var e,n=(new Date).getTime();return i=i||this.html,(e=jQuery(i).attr("id","ias_trigger_"+n)).hide(),e.on("click",jQuery.proxy(t,this)),e},this};IASTriggerExtension.prototype.bind=function(t){this.ias=t,t.on("next",jQuery.proxy(this.showTriggerNext,this),this.priority),t.on("rendered",jQuery.proxy(this.onRendered,this),this.priority);try{t.on("prev",jQuery.proxy(this.showTriggerPrev,this),this.priority)}catch(t){}},IASTriggerExtension.prototype.unbind=function(t){this.$triggerNext=null,this.$triggerPrev=null,this.count=0,t.off("next",this.showTriggerNext),t.off("rendered",this.onRendered);try{t.off("prev",this.showTriggerPrev)}catch(t){}},IASTriggerExtension.prototype.next=function(){this.enabled=!1,this.ias.pause(),this.$triggerNext&&(this.$triggerNext.remove(),this.$triggerNext=null),this.ias.next()},IASTriggerExtension.prototype.prev=function(){this.enabled=!1,this.ias.pause(),this.$triggerPrev&&(this.$triggerPrev.remove(),this.$triggerPrev=null),this.ias.prev()},IASTriggerExtension.prototype.defaults={text:"Load more items",html:'<div class="ias-trigger ias-trigger-next" style="text-align: center; cursor: pointer;"><a>{text}</a></div>',textPrev:"Load previous items",htmlPrev:'<div class="ias-trigger ias-trigger-prev" style="text-align: center; cursor: pointer;"><a>{text}</a></div>',offset:0},IASTriggerExtension.prototype.priority=1e3;

/* src: catalog/view/theme/journal3/js/products.js */
(function($){$(document).on('click','.grid-list .view-btn',function(){const $this=$(this);const $products=$('.main-products');const view=$this.data('view');const current=$products.hasClass('product-grid')?'grid':'list';$this.tooltip('hide');if(view!==current){$products.addClass('no-transitions').removeClass('product-'+current).addClass('product-'+view);setTimeout(function(){$products.removeClass('no-transitions');},1);const d=new Date;d.setTime(d.getTime()+24*60*60*1000*365);if(view==='list'){document.cookie='view=list;path=/;expires='+d.toGMTString();}else{document.cookie='view=grid;path=/;expires='+d.toGMTString();}}
$('.grid-list .view-btn').removeClass('active');$this.addClass('active');});$(document).on('change','.main-products-wrapper .select-group select',function(){if(!window['journal_filter']){window.location=$(this).val();}});$(function(){if(Journal['infiniteScrollStatus']&&$('.main-products').length){Journal['infiniteScrollInstance']=$.ias({container:'.main-products',item:'.product-layout',pagination:'.pagination-results',next:'.pagination a.next'});Journal['infiniteScrollInstance'].extension(new IASTriggerExtension({offset:parseInt(Journal['infiniteScrollOffset'],10)||Infinity,text:Journal['infiniteScrollLoadNext'],textPrev:Journal['infiniteScrollLoadPrev'],htmlPrev:'<div class="ias-trigger ias-trigger-prev"><a class="btn">{text}</a></div>',html:'<div class="ias-trigger ias-trigger-next"><a class="btn">{text}</a></div>'}));Journal['infiniteScrollInstance'].extension(new IASSpinnerExtension({html:'<div class="ias-spinner"><em class="fa fa-spinner fa-spin"></em></div>'}));Journal['infiniteScrollInstance'].extension(new IASNoneLeftExtension({text:Journal['infiniteScrollNoneLeft']}));Journal['infiniteScrollInstance'].extension(new IASPagingExtension());Journal['infiniteScrollInstance'].extension(new IASHistoryExtension({prev:'.pagination a.prev'}));Journal['infiniteScrollInstance'].on('load',function(event){try{var u=new URL(event.url);u.host=window.location.host;u.hostname=window.location.hostname;u.protocol=window.location.protocol;event.url=u.toString();}catch(e){}});Journal['infiniteScrollInstance'].on('loaded',function(data){$('.pagination-results').html($(data).find('.pagination-results'));});Journal['infiniteScrollInstance'].on('rendered',function(data){Journal.lazy();});}});})(jQuery);
/* src: catalog/view/theme/journal3/lib/ion-rangeSlider/ion.rangeSlider.min.js */
// Ion.RangeSlider | version 2.2.0 | https://github.com/IonDen/ion.rangeSlider
;(function(f){"function"===typeof define&&define.amd?define(["jquery"],function(n){return f(n,document,window,navigator)}):"object"===typeof exports?f(require("jquery"),document,window,navigator):f(jQuery,document,window,navigator)})(function(f,n,k,r,p){var t=0,m=function(){var a=r.userAgent,b=/msie\s\d+/i;return 0<a.search(b)&&(a=b.exec(a).toString(),a=a.split(" ")[1],9>a)?(f("html").addClass("lt-ie9"),!0):!1}();Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,d=[].slice;if("function"!=
typeof b)throw new TypeError;var c=d.call(arguments,1),e=function(){if(this instanceof e){var g=function(){};g.prototype=b.prototype;var g=new g,l=b.apply(g,c.concat(d.call(arguments)));return Object(l)===l?l:g}return b.apply(a,c.concat(d.call(arguments)))};return e});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),c=d.length>>>0;if(0===c)return-1;var e=+b||0;Infinity===Math.abs(e)&&(e=0);if(e>=c)return-1;
for(e=Math.max(0<=e?e:c-Math.abs(e),0);e<c;){if(e in d&&d[e]===a)return e;e++}return-1});var q=function(a,b,d){this.VERSION="2.2.0";this.input=a;this.plugin_count=d;this.old_to=this.old_from=this.update_tm=this.calc_count=this.current_plugin=0;this.raf_id=this.old_min_interval=null;this.no_diapason=this.force_redraw=this.dragging=!1;this.has_tab_index=!0;this.is_update=this.is_key=!1;this.is_start=!0;this.is_click=this.is_resize=this.is_active=this.is_finish=!1;b=b||{};this.$cache={win:f(k),body:f(n.body),
input:f(a),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]};
this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var c=this.$cache.input;a=c.prop("value");var e;d={type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,
keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" \u2014 ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};"INPUT"!==c[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",c[0]);c={type:c.data("type"),min:c.data("min"),max:c.data("max"),from:c.data("from"),to:c.data("to"),step:c.data("step"),
min_interval:c.data("minInterval"),max_interval:c.data("maxInterval"),drag_interval:c.data("dragInterval"),values:c.data("values"),from_fixed:c.data("fromFixed"),from_min:c.data("fromMin"),from_max:c.data("fromMax"),from_shadow:c.data("fromShadow"),to_fixed:c.data("toFixed"),to_min:c.data("toMin"),to_max:c.data("toMax"),to_shadow:c.data("toShadow"),prettify_enabled:c.data("prettifyEnabled"),prettify_separator:c.data("prettifySeparator"),force_edges:c.data("forceEdges"),keyboard:c.data("keyboard"),
grid:c.data("grid"),grid_margin:c.data("gridMargin"),grid_num:c.data("gridNum"),grid_snap:c.data("gridSnap"),hide_min_max:c.data("hideMinMax"),hide_from_to:c.data("hideFromTo"),prefix:c.data("prefix"),postfix:c.data("postfix"),max_postfix:c.data("maxPostfix"),decorate_both:c.data("decorateBoth"),values_separator:c.data("valuesSeparator"),input_values_separator:c.data("inputValuesSeparator"),disable:c.data("disable"),block:c.data("block"),extra_classes:c.data("extraClasses")};c.values=c.values&&c.values.split(",");
for(e in c)c.hasOwnProperty(e)&&(c[e]!==p&&""!==c[e]||delete c[e]);a!==p&&""!==a&&(a=a.split(c.input_values_separator||b.input_values_separator||";"),a[0]&&a[0]==+a[0]&&(a[0]=+a[0]),a[1]&&a[1]==+a[1]&&(a[1]=+a[1]),b&&b.values&&b.values.length?(d.from=a[0]&&b.values.indexOf(a[0]),d.to=a[1]&&b.values.indexOf(a[1])):(d.from=a[0]&&+a[0],d.to=a[1]&&+a[1]));f.extend(d,b);f.extend(d,c);this.options=d;this.update_check={};this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,
max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.init()};q.prototype={init:function(a){this.no_diapason=!1;this.coords.p_step=this.convertToPercent(this.options.step,!0);this.target="base";this.toggleInput();this.append();this.setMinMax();a?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart());this.updateScene()},append:function(){this.$cache.input.before('<span class="irs js-irs-'+
this.plugin_count+" "+this.options.extra_classes+'"></span>');this.$cache.input.prop("readonly",!0);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>');
this.$cache.rs=this.$cache.cont.find(".irs");this.$cache.min=this.$cache.cont.find(".irs-min");this.$cache.max=this.$cache.cont.find(".irs-max");this.$cache.from=this.$cache.cont.find(".irs-from");this.$cache.to=this.$cache.cont.find(".irs-to");this.$cache.single=this.$cache.cont.find(".irs-single");this.$cache.bar=this.$cache.cont.find(".irs-bar");this.$cache.line=this.$cache.cont.find(".irs-line");this.$cache.grid=this.$cache.cont.find(".irs-grid");"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>'),
this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),this.$cache.s_from=this.$cache.cont.find(".from"),
this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler());this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none");this.appendGrid();this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents());
this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask());this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var a=this.options.max,b=this.options.to;this.options.from>this.options.min&&b===a?this.$cache.s_from.addClass("type_last"):b<a&&this.$cache.s_to.addClass("type_last")},changeLevel:function(a){switch(a){case "single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);this.$cache.s_single.addClass("state_hover");
break;case "from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.$cache.s_from.addClass("state_hover");this.$cache.s_from.addClass("type_last");this.$cache.s_to.removeClass("type_last");break;case "to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake);this.$cache.s_to.addClass("state_hover");this.$cache.s_to.addClass("type_last");this.$cache.s_from.removeClass("type_last");break;case "both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-
this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>');this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask");this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove();this.$cache.cont=
null;this.$cache.line.off("keydown.irs_"+this.plugin_count);this.$cache.body.off("touchmove.irs_"+this.plugin_count);this.$cache.body.off("mousemove.irs_"+this.plugin_count);this.$cache.win.off("touchend.irs_"+this.plugin_count);this.$cache.win.off("mouseup.irs_"+this.plugin_count);m&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count));this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=
[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){if(!this.no_diapason){this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));
this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this));this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),
this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")));"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,
"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+
this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,
"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+
this.plugin_count,this.pointerClick.bind(this,"click")));if(this.options.keyboard)this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard"));m&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this)))}},pointerFocus:function(a){if(!this.target){var b="single"===this.options.type?this.$cache.single:this.$cache.from;a=b.offset().left;a+=b.width()/2-1;this.pointerClick("single",
{preventDefault:function(){},pageX:a})}},pointerMove:function(a){this.dragging&&(this.coords.x_pointer=(a.pageX||a.originalEvent.touches&&a.originalEvent.touches[0].pageX)-this.coords.x_gap,this.calc())},pointerUp:function(a){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,m&&f("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(f.contains(this.$cache.cont[0],
a.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(a,b){b.preventDefault();var d=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;2!==b.button&&("both"===a&&this.setTempMinInterval(),a||(a=this.target||"from"),this.current_plugin=this.plugin_count,this.target=a,this.dragging=this.is_active=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=d-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(a),m&&f("*").prop("unselectable",
!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(a,b){b.preventDefault();var d=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;2!==b.button&&(this.current_plugin=this.plugin_count,this.target=a,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(d-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(a,b){if(!(this.current_plugin!==this.plugin_count||b.altKey||
b.ctrlKey||b.shiftKey||b.metaKey)){switch(b.which){case 83:case 65:case 40:case 37:b.preventDefault();this.moveByKey(!1);break;case 87:case 68:case 38:case 39:b.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(a){var b=this.coords.p_pointer,d=(this.options.max-this.options.min)/100,d=this.options.step/d;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*(a?b+d:b-d));this.is_key=!0;this.calc()},setMinMax:function(){if(this.options)if(this.options.hide_min_max)this.$cache.min[0].style.display=
"none",this.$cache.max[0].style.display="none";else{if(this.options.values.length)this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]));else{var a=this._prettify(this.options.min),b=this._prettify(this.options.max);this.result.min_pretty=a;this.result.max_pretty=b;this.$cache.min.html(this.decorate(a,this.options.min));this.$cache.max.html(this.decorate(b,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1);
this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var a=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval);this.options.min_interval=a},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(a){if(this.options){this.calc_count++;if(10===this.calc_count||a)this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),
this.calcHandlePercent();if(this.coords.w_rs){this.calcPointerPercent();a=this.getHandleX();"both"===this.target&&(this.coords.p_gap=0,a=this.getHandleX());"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,a=this.getHandleX(),this.target=this.options.drag_interval?"both_one":this.chooseHandle(a));switch(this.target){case "base":var b=(this.options.max-this.options.min)/100;a=(this.result.from-this.options.min)/b;b=(this.result.to-this.options.min)/b;this.coords.p_single_real=this.toFixed(a);
this.coords.p_from_real=this.toFixed(a);this.coords.p_to_real=this.toFixed(b);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);this.coords.p_from_fake=
this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);this.target=null;break;case "single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(a);this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);
break;case "from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(a);this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_real=
this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case "to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(a);this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);
this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case "both":if(this.options.from_fixed||this.options.to_fixed)break;a=this.toFixed(a+.001*this.coords.p_handle);this.coords.p_from_real=this.convertToRealPercent(a)-this.coords.p_gap_left;this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);
this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.convertToRealPercent(a)+this.coords.p_gap_right;this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,
this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case "both_one":if(!this.options.from_fixed&&!this.options.to_fixed){var d=this.convertToRealPercent(a);a=this.result.to_percent-this.result.from_percent;var c=a/2,b=d-c,d=d+c;0>b&&(b=0,d=b+a);100<d&&(d=100,b=d-a);this.coords.p_from_real=this.calcWithStep(b);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,
this.options.from_min,this.options.from_max);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.calcWithStep(d);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,
this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=
this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to]));this.calcMinMax();this.calcLabels()}}},calcPointerPercent:function(){this.coords.w_rs?(0>this.coords.x_pointer||isNaN(this.coords.x_pointer)?this.coords.x_pointer=
0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(a){return a/(100-this.coords.p_handle)*100},convertToFakePercent:function(a){return a/100*(100-this.coords.p_handle)},getHandleX:function(){var a=100-this.coords.p_handle,b=this.toFixed(this.coords.p_pointer-this.coords.p_gap);0>b?b=0:b>a&&(b=a);return b},calcHandlePercent:function(){this.coords.w_handle=
"single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1);this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(a){return"single"===this.options.type?"single":a>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=
this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=
this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=
this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&
(cancelAnimationFrame(this.raf_id),this.raf_id=null);clearTimeout(this.update_tm);this.update_tm=null;this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1);if(this.coords.w_rs){this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0);if(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)this.setMinMax(),
this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow();if(this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)){if(this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key){this.drawLabels();this.$cache.bar[0].style.left=this.coords.p_bar_x+"%";this.$cache.bar[0].style.width=this.coords.p_bar_w+"%";if("single"===this.options.type)this.$cache.s_single[0].style.left=
this.coords.p_single_fake+"%";else{this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%";this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%";if(this.old_from!==this.result.from||this.force_redraw)this.$cache.from[0].style.left=this.labels.p_from_left+"%";if(this.old_to!==this.result.to||this.force_redraw)this.$cache.to[0].style.left=this.labels.p_to_left+"%"}this.$cache.single[0].style.left=this.labels.p_single_left+"%";this.writeToInput();this.old_from===this.result.from&&this.old_to===
this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input"));this.old_from=this.result.from;this.old_to=this.result.to;this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange();if(this.is_key||this.is_click)this.is_click=this.is_key=!1,this.callOnFinish();this.is_finish=this.is_resize=this.is_update=!1}this.force_redraw=this.is_click=this.is_key=this.is_start=!1}}},drawLabels:function(){if(this.options){var a=this.options.values.length,
b=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type){if(a)a=this.decorate(b[this.result.from]);else{var d=this._prettify(this.result.from);a=this.decorate(d,this.result.from)}this.$cache.single.html(a);this.calcLabels();this.$cache.min[0].style.visibility=this.labels.p_single_left<this.labels.p_min+1?"hidden":"visible";this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?"hidden":"visible"}else{a?(this.options.decorate_both?
(a=this.decorate(b[this.result.from]),a+=this.options.values_separator,a+=this.decorate(b[this.result.to])):a=this.decorate(b[this.result.from]+this.options.values_separator+b[this.result.to]),d=this.decorate(b[this.result.from]),b=this.decorate(b[this.result.to])):(d=this._prettify(this.result.from),b=this._prettify(this.result.to),this.options.decorate_both?(a=this.decorate(d,this.result.from),a+=this.options.values_separator,a+=this.decorate(b,this.result.to)):a=this.decorate(d+this.options.values_separator+
b,this.result.to),d=this.decorate(d,this.result.from),b=this.decorate(b,this.result.to));this.$cache.single.html(a);this.$cache.from.html(d);this.$cache.to.html(b);this.calcLabels();a=Math.min(this.labels.p_single_left,this.labels.p_from_left);d=this.labels.p_single_left+this.labels.p_single_fake;var b=this.labels.p_to_left+this.labels.p_to_fake,c=Math.max(d,b);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility=
"hidden",this.$cache.single[0].style.visibility="visible",this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",c=b):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",c=Math.max(d,b))):(this.$cache.from[0].style.visibility=
"visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden");this.$cache.min[0].style.visibility=a<this.labels.p_min+1?"hidden":"visible";this.$cache.max[0].style.visibility=c>100-this.labels.p_max-1?"hidden":"visible"}}},drawShadow:function(){var a=this.options,b=this.$cache,d="number"===typeof a.from_min&&!isNaN(a.from_min),c="number"===typeof a.from_max&&!isNaN(a.from_max),e="number"===typeof a.to_min&&!isNaN(a.to_min),g="number"===typeof a.to_max&&!isNaN(a.to_max);
"single"===a.type?a.from_shadow&&(d||c)?(d=this.convertToPercent(d?a.from_min:a.min),c=this.convertToPercent(c?a.from_max:a.max)-d,d=this.toFixed(d-this.coords.p_handle/100*d),c=this.toFixed(c-this.coords.p_handle/100*c),d+=this.coords.p_handle/2,b.shad_single[0].style.display="block",b.shad_single[0].style.left=d+"%",b.shad_single[0].style.width=c+"%"):b.shad_single[0].style.display="none":(a.from_shadow&&(d||c)?(d=this.convertToPercent(d?a.from_min:a.min),c=this.convertToPercent(c?a.from_max:a.max)-
d,d=this.toFixed(d-this.coords.p_handle/100*d),c=this.toFixed(c-this.coords.p_handle/100*c),d+=this.coords.p_handle/2,b.shad_from[0].style.display="block",b.shad_from[0].style.left=d+"%",b.shad_from[0].style.width=c+"%"):b.shad_from[0].style.display="none",a.to_shadow&&(e||g)?(e=this.convertToPercent(e?a.to_min:a.min),a=this.convertToPercent(g?a.to_max:a.max)-e,e=this.toFixed(e-this.coords.p_handle/100*e),a=this.toFixed(a-this.coords.p_handle/100*a),e+=this.coords.p_handle/2,b.shad_to[0].style.display=
"block",b.shad_to[0].style.left=e+"%",b.shad_to[0].style.width=a+"%"):b.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",
this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput();if(this.options.onStart&&"function"===typeof this.options.onStart)if(this.options.scope)this.options.onStart.call(this.options.scope,this.result);else this.options.onStart(this.result)},callOnChange:function(){this.writeToInput();if(this.options.onChange&&"function"===typeof this.options.onChange)if(this.options.scope)this.options.onChange.call(this.options.scope,
this.result);else this.options.onChange(this.result)},callOnFinish:function(){this.writeToInput();if(this.options.onFinish&&"function"===typeof this.options.onFinish)if(this.options.scope)this.options.onFinish.call(this.options.scope,this.result);else this.options.onFinish(this.result)},callOnUpdate:function(){this.writeToInput();if(this.options.onUpdate&&"function"===typeof this.options.onUpdate)if(this.options.scope)this.options.onUpdate.call(this.options.scope,this.result);else this.options.onUpdate(this.result)},
toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input");this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex");this.has_tab_index=!this.has_tab_index},convertToPercent:function(a,b){var d=this.options.max-this.options.min;return d?this.toFixed((b?a:a-this.options.min)/(d/100)):(this.no_diapason=!0,0)},convertToValue:function(a){var b=this.options.min,d=this.options.max,c=b.toString().split(".")[1],e=d.toString().split(".")[1],g,l,f=0,h=0;
if(0===a)return this.options.min;if(100===a)return this.options.max;c&&(f=g=c.length);e&&(f=l=e.length);g&&l&&(f=g>=l?g:l);0>b&&(h=Math.abs(b),b=+(b+h).toFixed(f),d=+(d+h).toFixed(f));a=(d-b)/100*a+b;(b=this.options.step.toString().split(".")[1])?a=+a.toFixed(b.length):(a/=this.options.step,a*=this.options.step,a=+a.toFixed(0));h&&(a-=h);h=b?+a.toFixed(b.length):this.toFixed(a);h<this.options.min?h=this.options.min:h>this.options.max&&(h=this.options.max);return h},calcWithStep:function(a){var b=
Math.round(a/this.coords.p_step)*this.coords.p_step;100<b&&(b=100);100===a&&(b=100);return this.toFixed(b)},checkMinInterval:function(a,b,d){var c=this.options;if(!c.min_interval)return a;a=this.convertToValue(a);b=this.convertToValue(b);"from"===d?b-a<c.min_interval&&(a=b-c.min_interval):a-b<c.min_interval&&(a=b+c.min_interval);return this.convertToPercent(a)},checkMaxInterval:function(a,b,d){var c=this.options;if(!c.max_interval)return a;a=this.convertToValue(a);b=this.convertToValue(b);"from"===
d?b-a>c.max_interval&&(a=b-c.max_interval):a-b>c.max_interval&&(a=b+c.max_interval);return this.convertToPercent(a)},checkDiapason:function(a,b,d){a=this.convertToValue(a);var c=this.options;"number"!==typeof b&&(b=c.min);"number"!==typeof d&&(d=c.max);a<b&&(a=b);a>d&&(a=d);return this.convertToPercent(a)},toFixed:function(a){a=a.toFixed(20);return+a},_prettify:function(a){return this.options.prettify_enabled?this.options.prettify&&"function"===typeof this.options.prettify?this.options.prettify(a):
this.prettify(a):a},prettify:function(a){return a.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(a,b){if(!this.options.force_edges)return this.toFixed(a);0>a?a=0:a>100-b&&(a=100-b);return this.toFixed(a)},validate:function(){var a=this.options,b=this.result,d=a.values,c=d.length,e;"string"===typeof a.min&&(a.min=+a.min);"string"===typeof a.max&&(a.max=+a.max);"string"===typeof a.from&&(a.from=+a.from);"string"===typeof a.to&&(a.to=+a.to);
"string"===typeof a.step&&(a.step=+a.step);"string"===typeof a.from_min&&(a.from_min=+a.from_min);"string"===typeof a.from_max&&(a.from_max=+a.from_max);"string"===typeof a.to_min&&(a.to_min=+a.to_min);"string"===typeof a.to_max&&(a.to_max=+a.to_max);"string"===typeof a.grid_num&&(a.grid_num=+a.grid_num);a.max<a.min&&(a.max=a.min);if(c)for(a.p_values=[],a.min=0,a.max=c-1,a.step=1,a.grid_num=a.max,a.grid_snap=!0,e=0;e<c;e++){var g=+d[e];isNaN(g)?g=d[e]:(d[e]=g,g=this._prettify(g));a.p_values.push(g)}if("number"!==
typeof a.from||isNaN(a.from))a.from=a.min;if("number"!==typeof a.to||isNaN(a.to))a.to=a.max;"single"===a.type?(a.from<a.min&&(a.from=a.min),a.from>a.max&&(a.from=a.max)):(a.from<a.min&&(a.from=a.min),a.from>a.max&&(a.from=a.max),a.to<a.min&&(a.to=a.min),a.to>a.max&&(a.to=a.max),this.update_check.from&&(this.update_check.from!==a.from&&a.from>a.to&&(a.from=a.to),this.update_check.to!==a.to&&a.to<a.from&&(a.to=a.from)),a.from>a.to&&(a.from=a.to),a.to<a.from&&(a.to=a.from));if("number"!==typeof a.step||
isNaN(a.step)||!a.step||0>a.step)a.step=1;"number"===typeof a.from_min&&a.from<a.from_min&&(a.from=a.from_min);"number"===typeof a.from_max&&a.from>a.from_max&&(a.from=a.from_max);"number"===typeof a.to_min&&a.to<a.to_min&&(a.to=a.to_min);"number"===typeof a.to_max&&a.from>a.to_max&&(a.to=a.to_max);if(b){b.min!==a.min&&(b.min=a.min);b.max!==a.max&&(b.max=a.max);if(b.from<b.min||b.from>b.max)b.from=a.from;if(b.to<b.min||b.to>b.max)b.to=a.to}if("number"!==typeof a.min_interval||isNaN(a.min_interval)||
!a.min_interval||0>a.min_interval)a.min_interval=0;if("number"!==typeof a.max_interval||isNaN(a.max_interval)||!a.max_interval||0>a.max_interval)a.max_interval=0;a.min_interval&&a.min_interval>a.max-a.min&&(a.min_interval=a.max-a.min);a.max_interval&&a.max_interval>a.max-a.min&&(a.max_interval=a.max-a.min)},decorate:function(a,b){var d="",c=this.options;c.prefix&&(d+=c.prefix);d+=a;c.max_postfix&&(c.values.length&&a===c.p_values[c.max]?(d+=c.max_postfix,c.postfix&&(d+=" ")):b===c.max&&(d+=c.max_postfix,
c.postfix&&(d+=" ")));c.postfix&&(d+=c.postfix);return d},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.convertToPercent(this.result.from);this.result.from_pretty=this._prettify(this.result.from);this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.convertToPercent(this.result.to);this.result.to_pretty=this._prettify(this.result.to);this.options.values&&
(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(this.options.grid){var a=this.options,b;var d=a.max-a.min;var c=a.grid_num,e=4,g="";this.calcGridMargin();if(a.grid_snap)if(50<d){c=50/a.step;var f=this.toFixed(a.step/.5)}else c=d/a.step,f=this.toFixed(a.step/(d/100));else f=this.toFixed(100/c);4<c&&(e=3);7<c&&(e=2);14<c&&(e=1);28<c&&(e=0);
for(d=0;d<c+1;d++){var k=e;var h=this.toFixed(f*d);100<h&&(h=100);this.coords.big[d]=h;var m=(h-f*(d-1))/(k+1);for(b=1;b<=k&&0!==h;b++){var n=this.toFixed(h-m*b);g+='<span class="irs-grid-pol small" style="left: '+n+'%"></span>'}g+='<span class="irs-grid-pol" style="left: '+h+'%"></span>';b=this.convertToValue(h);b=a.values.length?a.p_values[b]:this._prettify(b);g+='<span class="irs-grid-text js-grid-text-'+d+'" style="left: '+h+'%">'+b+"</span>"}this.coords.big_num=Math.ceil(c+1);this.$cache.cont.addClass("irs-with-grid");
this.$cache.grid.html(g);this.cacheGridLabels()}},cacheGridLabels:function(){var a,b=this.coords.big_num;for(a=0;a<b;a++){var d=this.$cache.grid.find(".js-grid-text-"+a);this.$cache.grid_labels.push(d)}this.calcGridLabels()},calcGridLabels:function(){var a;var b=[];var d=[],c=this.coords.big_num;for(a=0;a<c;a++)this.coords.big_w[a]=this.$cache.grid_labels[a].outerWidth(!1),this.coords.big_p[a]=this.toFixed(this.coords.big_w[a]/this.coords.w_rs*100),this.coords.big_x[a]=this.toFixed(this.coords.big_p[a]/
2),b[a]=this.toFixed(this.coords.big[a]-this.coords.big_x[a]),d[a]=this.toFixed(b[a]+this.coords.big_p[a]);this.options.force_edges&&(b[0]<-this.coords.grid_gap&&(b[0]=-this.coords.grid_gap,d[0]=this.toFixed(b[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),d[c-1]>100+this.coords.grid_gap&&(d[c-1]=100+this.coords.grid_gap,b[c-1]=this.toFixed(d[c-1]-this.coords.big_p[c-1]),this.coords.big_x[c-1]=this.toFixed(this.coords.big_p[c-1]-this.coords.grid_gap)));this.calcGridCollision(2,
b,d);this.calcGridCollision(4,b,d);for(a=0;a<c;a++)b=this.$cache.grid_labels[a][0],this.coords.big_x[a]!==Number.POSITIVE_INFINITY&&(b.style.marginLeft=-this.coords.big_x[a]+"%")},calcGridCollision:function(a,b,d){var c,e=this.coords.big_num;for(c=0;c<e;c+=a){var g=c+a/2;if(g>=e)break;var f=this.$cache.grid_labels[g][0];f.style.visibility=d[c]<=b[g]?"visible":"hidden"}},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle=
"single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(a){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=
this.result.from,this.update_check.to=this.result.to,this.options=f.extend(this.options,a),this.validate(),this.updateResult(a),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),f.data(this.input,"ionRangeSlider",null),this.remove(),this.options=this.input=null)}};f.fn.ionRangeSlider=function(a){return this.each(function(){f.data(this,"ionRangeSlider")||
f.data(this,"ionRangeSlider",new q(this,a,t++))})};(function(){for(var a=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!k.requestAnimationFrame;++d)k.requestAnimationFrame=k[b[d]+"RequestAnimationFrame"],k.cancelAnimationFrame=k[b[d]+"CancelAnimationFrame"]||k[b[d]+"CancelRequestAnimationFrame"];k.requestAnimationFrame||(k.requestAnimationFrame=function(b,d){var c=(new Date).getTime(),e=Math.max(0,16-(c-a)),f=k.setTimeout(function(){b(c+e)},e);a=c+e;return f});k.cancelAnimationFrame||(k.cancelAnimationFrame=
function(a){clearTimeout(a)})})()});

/* src: catalog/view/theme/journal3/lib/accounting/accounting.min.js */
/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function(p,z){function q(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function m(a){return u?u(a):"[object Array]"===v.call(a)}function r(a){return"[object Object]"===v.call(a)}function s(a,b){var d,a=a||{},b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function j(a,b,d){var c=[],e,h;if(!a)return c;if(w&&a.map===w)return a.map(b,d);for(e=0,h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function n(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function x(a){var b=c.settings.currency.format;"function"===typeof a&&(a=a());return q(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!q(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},w=Array.prototype.map,u=Array.isArray,v=Object.prototype.toString,o=c.unformat=c.parse=function(a,b){if(m(a))return j(a,function(a){return o(a,b)});a=a||0;if("number"===typeof a)return a;var b=b||".",c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return!isNaN(c)?c:0},y=c.toFixed=function(a,b){var b=n(b,c.settings.number.precision),d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},t=c.formatNumber=c.format=function(a,b,d,i){if(m(a))return j(a,function(a){return t(a,b,d,i)});var a=o(a),e=s(r(b)?b:{precision:b,thousand:d,decimal:i},c.settings.number),h=n(e.precision),f=0>a?"-":"",g=parseInt(y(Math.abs(a||0),h),10)+"",l=3<g.length?g.length%3:0;return f+(l?g.substr(0,l)+e.thousand:"")+g.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+y(Math.abs(a),h).split(".")[1]:"")},A=c.formatMoney=function(a,b,d,i,e,h){if(m(a))return j(a,function(a){return A(a,b,d,i,e,h)});var a=o(a),f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format);return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,i,e,h){if(!a)return[];var f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format),l=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,k=0,a=j(a,function(a){if(m(a))return c.formatColumn(a,f);a=o(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal));if(a.length>k)k=a.length;return a});return j(a,function(a){return q(a)&&a.length<k?l?a.replace(f.symbol,f.symbol+Array(k-a.length+1).join(" ")):Array(k-a.length+1).join(" ")+a:a})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports)exports=module.exports=c;exports.accounting=c}else"function"===typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(a){return function(){p.accounting=a;c.noConflict=z;return c}}(p.accounting),p.accounting=c)})(this);

/* src: catalog/view/theme/journal3/js/filter.js */
function journal_filter_url(){var f={};$('input[data-filter-trigger]:checked, select[data-filter-trigger]').each(function(){var $this=$(this);var name='f'+$this.attr('name');var value=$this.val().trim();f[name]=f[name]||[];f[name].push(value);});if($('.filter-price').length){var min=$('.filter-price-min').data('min');var max=$('.filter-price-max').data('max');var from=parseInt($('.filter-price-min').val(),10);var to=parseInt($('.filter-price-max').val(),10);if(((from!=='')&&(from!==min))||((to!=='')&&(to!==max))){f['fmin']=[from];f['fmax']=[to];}}
var sort=$('#input-sort').data('filter-sort');var order=$('#input-sort').data('filter-order');if(sort&&order){f['sort']=[sort];f['order']=[order];}
var limit=$('#input-limit').data('filter-limit');if(limit){f['limit']=[limit];}
var url=[];$.each(f,function(k,v){url.push(k+'='+v.join(Journal['filterUrlValuesSeparator']||','));});url=url.join('&');if(!url){return Journal['filterBase'];}
if(Journal['filterBase'].indexOf('?')===-1){return Journal['filterBase']+'?'+url;}
return Journal['filterBase']+'&'+url;}
function journal_filter_price_slider(){$('.filter-price .range-slider input').ionRangeSlider({type:'double',min:$('.filter-price-min').data('min'),max:$('.filter-price-max').data('max'),from:$('.filter-price-min').val(),to:$('.filter-price-max').val(),onChange:function(data){$('.filter-price-min').val(data.from);$('.filter-price-max').val(data.to);},onFinish:function(data){$('.filter-price-min').trigger('blur');},prettify:function(value){if(Journal['currency_left']){return accounting.formatMoney(value,Journal['currency_left'],0,Journal['currency_thousand'],Journal['currency_decimal'],'%s%v');}
return accounting.formatMoney(value,Journal['currency_right'],0,Journal['currency_thousand'],Journal['currency_decimal'],'%v%s');}});}
function journal_filter(url,opts){opts=opts||{};var source=opts.source;var updateHistory=opts.updateHistory;try{var u=new URL(url);u.host=window.location.host;u.hostname=window.location.hostname;u.protocol=window.location.protocol;url=u.toString();}catch(e){}
if(updateHistory!==false&&window.history&&window.history.pushState){var state={Title:document.title,Url:url};window.history.pushState(state,state.Title,state.Url);}
if(Journal['infiniteScrollInstance']){Journal['infiniteScrollInstance'].destroy();}
$.ajax({url:url,dataType:'html',headers:{'Filter-Module':1},beforeSend:function(){$('[data-toggle="tooltip"]').tooltip('hide');loader('.container > .row',true);},complete:function(){loader('.container > .row',false);if(Journal['filterScrollTop']||(source==='pagination')){$('html, body').animate({scrollTop:0},700);}},success:function(response){var $response=$(response);Journal['filterCollapsed']={};$('.module-filter .module-item .panel-heading a').each(function(){var $this=$(this);Journal['filterCollapsed'][$this.data('filter')]=$this.hasClass('collapsed');});var $slider=$('.filter-price .range-slider input');if($slider.length&&$slider.data('ionRangeSlider')){$slider.data('ionRangeSlider').destroy();}
$('.module-filter').replaceWith($response.find('.module-filter'));$('.main-products-wrapper').replaceWith($response.find('.main-products-wrapper'));$('#input-sort, #input-limit').removeAttr('onchange');var $panel_group=$('.panel-group');$panel_group.on('show.bs.collapse',function(e){$(e.target).parent().addClass('panel-active');$(e.target).parent().removeClass('panel-collapsed');});$panel_group.on('hide.bs.collapse',function(e){$(e.target).parent().removeClass('panel-active');$(e.target).parent().addClass('panel-collapsing');});$panel_group.on('hidden.bs.collapse',function(e){$(e.target).parent().removeClass('panel-collapsing');$(e.target).parent().addClass('panel-collapsed');});Object.keys(Journal['filterCollapsed']).forEach(function(key){var $collapse=$($('.module-filter .module-item .panel-heading a[data-filter="'+key+'"]').attr('href'));if(Journal['filterCollapsed'][key]===true){$collapse.collapse('hide');}
if(Journal['filterCollapsed'][key]===false){$collapse.collapse('show');}});journal_filter_price_slider();Journal.lazy();if(Journal['infiniteScrollInstance']){$('.ias-trigger').remove();setTimeout(function(){Journal['infiniteScrollInstance'].reinitialize();},100);}}});}
jQuery(function($){journal_filter_price_slider();var old;$(document).delegate('.filter-price-min, .filter-price-max','focus',function(e){old=e.target.value;});$(document).delegate('.filter-price-min, .filter-price-max','blur keydown',function(e){if((e.type==='keydown'&&e.keyCode===13)||(e.type==='focusout')){var value=e.target.value.trim();if($.isNumeric(value)&&(old!==value)){journal_filter(journal_filter_url());return false;}}});$(document).delegate('[data-filter-trigger]','change',function(){journal_filter(journal_filter_url());return false;});$(document).delegate('.pagination a','click',function(){journal_filter($(this).attr('href'),{source:'pagination'});return false;});$('#input-sort, #input-limit').removeAttr('onchange');$(document).delegate('#input-sort, #input-limit','change',function(){journal_filter($(this).val());return false;});$(window).on('popstate',function(e){window.location.reload();});$(document).delegate('.reset-filter','click',function(){journal_filter(Journal['filterBase']);});});
